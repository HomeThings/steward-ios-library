##Bootstrapping Authentication

If you want to provide authentication capabilities to your [Thing System](http://thethingsystem.com) client the easiest way to do this is to create a client id and the associated authentication token using the steward's own [Client Bootstrapping web service](http://thethingsystem.com/dev/Instructions-for-starting-the-Steward.html).

![steward console](https://github.com/thethingsystem/steward/wiki/images/client.bootstrap.png)

Here you can generate a Client ID and the authentication secret you can use to generate a [time-based one-time password](http://en.wikipedia.org/wiki/Time-based_One-time_Password_Algorithm) (TOTP) you will need to authenticate to the steward. The easiest way to pass this secret to your application—and the Client library which can take it and generate the needed TOTP—is via a QR code.

We provide a simple `ScanController` class which you can present modally inside your application and uses the [ZXingObjC](https://github.com/TheLevelUp/ZXingObjC) library to scan the QR code generated by the steward bootstrap service, and will return the authentication secret via a delegate callback.

You should

    #import "ScanController.h"

and declare your class as a `<ScanControllerDelegate>`, and then present the view controller,

	ScanController *scanner = [[ScanController alloc] initWithNibName:@"ScanController" bundle:nil];
	scanner.delegate = self;
	[self presentViewController:scanner animated:YES completion:NULL];

This will present a (back) camera view. The user simply has to point the phone at the QR code—possibly tapping the screen to focus the camera depening on lighting and distance—and the controller will detect the QR code and return the secret via the

    - (void)closedWithSecret:(NSString *)secret {
        
	}

delegate callback. You can then pass the authentication secret back to the main `Client` class by,

    Client *client = [Client sharedClient];
    client.secret = secret;

If the user hits the cancel button in the view controller without a QR code being scanned then you will recieve a

    - (void)closedWithoutSecret {
    
	}

delegate callback.

###Installation

We've deliberately left the `ScanController` out of the main `Client` library bundle to minimise the size of library for other use cases. If you want to make use of it in your project just drag-and-drop all the files in the `Bootstrap/` directory into your project. This includes the`ScanController` code as well as a copy of the [ZXingObjC](https://github.com/TheLevelUp/ZXingObjC) library itself. 

You may want to grab the latest version of the [ZXingObjC](https://github.com/TheLevelUp/ZXingObjC)] library directly their GitHub project, although it currently needs a [small fix](https://github.com/TheLevelUp/ZXingObjC/pull/112) to work correctly.

[![Analytics](https://ga-beacon.appspot.com/UA-44378714-2/TheThingSystem/steward-ios-library/bootstrap/README)](https://github.com/igrigorik/ga-beacon)